(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".modal-container{position:fixed;left:0;top:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;background-color:#3e3e3e21;cursor:pointer}.modal-item{cursor:default}.modal-list-enter-active,.modal-list-leave-active,.modal-list-enter-active .modal-item,.modal-list-leave-active .modal-item{transition:all .2s ease}.modal-list-enter-from,.modal-list-leave-to{opacity:0!important}.modal-list-enter-from .modal-item,.modal-list-leave-to .modal-item{transform:translateY(-60px)}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
"use strict";/*!
  * jenesius-vue-modal v1.9.2
  * (c) 2023 Jenesius
  * @license MIT
  */Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const l=require("vue");var M=function(t,e){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},M(t,e)};function j(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function h(t,e,n,i){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(f){try{u(i.next(f))}catch(b){a(b)}}function d(f){try{u(i.throw(f))}catch(b){a(b)}}function u(f){f.done?o(f.value):r(f.value).then(s,d)}u((i=i.apply(t,e||[])).next())})}function m(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(f){return d([u,f])}}function d(u){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(n=0)),n;)try{if(i=1,r&&(o=u[0]&2?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,r=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(f){u=[6,f],r=0}finally{i=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var v=function(t){j(e,t);function e(n,i){i===void 0&&(i=null);var r=t.call(this)||this;return r.isModalError=!0,r.message=n,r.details=i,r}return e.Undefined=function(n){return new e("Modal with id: ".concat(n," not founded. The modal window may have been closed earlier."))},e.UndefinedGuardName=function(n){return new e("Guard's name ".concat(n," is not declaration."))},e.NextReject=function(n){return new e("Guard returned false. Modal navigation was stopped. Modal id ".concat(n))},e.GuardDeclarationType=function(n){return new e("Guard's type should be a function. Provided:",n)},e.ConfigurationType=function(n){return new e("Configuration type must be an Object. Provided",n)},e.ConfigurationUndefinedParam=function(n,i){return new e("In configuration founded unknown parameter: ".concat(n,". Available are ").concat(i.join(", ")," "))},e.QueueNoEmpty=function(){return new e("Modal's queue is not empty. Probably some modal reject closing by onClose hook.")},e.EmptyModalQueue=function(){return new e("Modal queue is empty.")},e.NotInitialized=function(){return new e("Modal Container not found. Put container from jenesius-vue-modal in App's template. Check documentation for more information https://modal.jenesius.com/docs.html/installation#getting-started.")},e.ModalComponentNotProvided=function(){return new e("The first parameter(VueComponent) was not specified.")},e.DuplicatedRouterIntegration=function(){return new e("useModalRouter.init should escaped only once.")},e.ModalRouterIntegrationNotInitialized=function(){return new e("The integration was not initialized. Please, use useModalRouter.init(router). For more information: https://modal.jenesius.com/docs.html/integration-vue-router#installation")},e.ModalEventNameMustBeString=function(n){return new e("Event name must be a string. Provided: ".concat(n))},e.ModalNotExistsInStore=function(n){return new e("Provided name(".concat(n,") don't exist in the store. Has the given name been added to the store?"))},e}(Error),g={scrollLock:!0,animation:"modal-list",backgroundClose:!0,escClose:!0,store:{}};function T(t){if(typeof t!="object")throw v.ConfigurationType(t);Object.assign(g,t)}var c=l.ref([]),p={initialized:!1,instanceStorage:{}};l.watch(c.value,function(){g.scrollLock&&(c.value.length?document.body.style.overflowY="hidden":document.body.style.overflowY="auto")});var y={store:{},add:function(t,e,n){var i;if(typeof n!="function")throw v.GuardDeclarationType(n);this.store[t]||(this.store[t]=(i={},i[e]=[],i)),this.store[t][e]||(this.store[t][e]=[]),this.store[t][e].push(n)},get:function(t,e){return t in this.store?e in this.store[t]?this.store[t][e]:[]:[]},delete:function(t){t in this.store&&delete this.store[t]}};function E(t){return t.reduce(function(e,n){return e.then(function(){return n()})},Promise.resolve())}function N(t,e,n){return function(){return new Promise(function(i,r){var o=function(a){a===void 0&&(a=!0),a===!1&&r(v.NextReject(e)),i()};Promise.resolve(t.call(p.instanceStorage[e],n)).then(o).catch(function(a){return r(a)})})}}function P(t){return t===void 0&&(t=""),E(c.value.filter(function(e){return!t||!e.containerId||e.containerId===t}).map(function(e){return function(){return e.close()}}))}function C(t){if(t===void 0&&(t=""),t){if(c.value.filter(function(n){return!n.containerId||n.containerId===t}).length===0)return;var e=function(){for(var n=c.value.length-1;n>=0;n--)if(c.value[n].containerId===t)return n;return-1};return c.value[e()]}else return c.value.length===0?void 0:c.value[c.value.length-1]}function z(t){t===void 0&&(t="");var e=C(t);return e?e.close():Promise.resolve()}function B(t){t===void 0&&(t={});var e={background:!1,esc:!1};return Object.assign(e,t)}function w(t,e){e===void 0&&(e={});var n=c.value.findIndex(function(r){return r.id===t});if(n===-1)return Promise.reject(v.Undefined(t));var i=y.get(t,"close").map(function(r){return N(r,t,B(e))});return E(i).then(function(){c.value.splice(n,1),delete p.instanceStorage[t],y.delete(t)})}function G(t,e){p.instanceStorage[t]=e}function D(t){return p.instanceStorage[t]}function A(t){var e={backgroundClose:g.backgroundClose,isRoute:!1,containerId:""};return t.backgroundClose!==void 0&&(e.backgroundClose=t.backgroundClose),t.isRoute&&(e.isRoute=t.isRoute),t.containerId&&(e.containerId=t.containerId),e}var k=function(){function t(e,n,i){var r=this;this.events=l.reactive({}),this.backgroundClose=!0,this.isRoute=!1,this.containerId="",this.id=t.modalId++,this.component=e,this.props=l.ref(n),this.closed=l.computed(function(){return!c.value.includes(r)}),e.beforeModalClose&&y.add(this.id,"close",e.beforeModalClose);var o=A(i);this.backgroundClose=o.backgroundClose,this.isRoute=o.isRoute,this.containerId=o.containerId}return t.prototype.close=function(){return w(this.id)},Object.defineProperty(t.prototype,"onclose",{set:function(e){y.add(this.id,"close",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instance",{get:function(){return D(this.id)},enumerable:!1,configurable:!0}),t.prototype.on=function(e,n){var i=this;return Array.isArray(this.events[e])||(this.events[e]=[]),this.events[e].push(n),function(){var r=i.events[e].indexOf(n);r!==-1&&i.events[e].splice(r,1)}},t.modalId=0,t.EVENT_PROMPT="jenesius-vue-modal:____P____R____O____M____P____T",t}();function Q(t,e,n){if(!p.initialized)throw v.NotInitialized();if(typeof t=="string"){var i=S(t);if(!i)throw v.ModalNotExistsInStore(t);t=i}if(!t)throw v.ModalComponentNotProvided();var r=new k(t,e,n);return c.value.push(l.markRaw(r)),r}function I(t,e,n){return e===void 0&&(e={}),n===void 0&&(n={}),Promise.resolve().then(function(){return Q(t,e,n)})}function x(t,e,n){return e===void 0&&(e={}),n===void 0&&(n={}),P(n.containerId).then(function(){return I(t,e,n)})}function F(t){var e,n,i,r=l.getCurrentInstance(),o=String(((e=r==null?void 0:r.props)===null||e===void 0?void 0:e.modalId)||((n=r==null?void 0:r.props)===null||n===void 0?void 0:n["modal-id"])||((i=r==null?void 0:r.attrs)===null||i===void 0?void 0:i.modalId)),a=o.replace(/[^0-9]/g,"");y.add(Number(a),"close",t)}function U(t,e,n){return e===void 0&&(e={}),n===void 0&&(n={}),h(this,void 0,void 0,function(){var i,r=this;return m(this,function(o){switch(o.label){case 0:return[4,I(t,e,n)];case 1:return i=o.sent(),[2,new Promise(function(a){i.on(k.EVENT_PROMPT,function(s){return h(r,void 0,void 0,function(){return m(this,function(d){switch(d.label){case 0:return[4,i.close()];case 1:return d.sent(),a(s),[2]}})})})})]}})})}function S(t){return g.store[t]||void 0}const R={__name:"WidgetModalContainerItem",props:{id:Number},setup(t){const e=t,n=l.ref(null),i=l.ref(null),r=o(e.id);function o(s){return c.value.find(d=>d.id===s)}function a(s){if(s.target===i.value&&r.backgroundClose)return w(r.id,{background:!0}).catch(()=>{})}return l.watch(()=>n.value,s=>{G(e.id,s)}),(s,d)=>(l.openBlock(),l.createElementBlock("div",{class:"widget__modal-container__item modal-container",ref_key:"containerRef",ref:i,onClick:a},[(l.openBlock(),l.createBlock(l.resolveDynamicComponent(l.unref(r).component),l.mergeProps(l.unref(r).props.value,{class:"modal-item widget__modal-wrap",modalId:`_modal_${t.id}`,ref_key:"modalRef",ref:n},l.toHandlers(l.unref(r).events)),null,16,["modalId"]))],512))}};function V(){p.initialized=!0,document.addEventListener("keyup",function(t){if(g.escClose&&(t.key==="Escape"||t.code==="Escape")){var e=C();if(!e)return;w(e.id,{esc:!0})}})}const W={setup(t){return l.onMounted(V),()=>l.h(l.TransitionGroup,{name:g.animation},{default:()=>c.value.filter(e=>!e.containerId||e.containerId===t.containerId).map(e=>l.h(R,{key:e.id,id:e.id}))})},components:{WidgetContainerModalItem:R},props:{containerId:{type:String,default:""}}};var _={router:null};function q(t){var e=this;if(_.router)throw v.DuplicatedRouterIntegration();_.router=t;function n(i){for(var r=i.matched.length-1;r>=0;r--){var o=i.matched[r].components,a=Object.values(o).find(function(s){return s._isModal});if(a)return a}return null}t.beforeEach(function(i,r){return h(e,void 0,void 0,function(){var o,a,s;return m(this,function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),o=n(r),o&&!(!((s=(a=o.getModalObject())===null||a===void 0?void 0:a.closed)===null||s===void 0)&&s.value)?[4,o.close(!0)]:[3,2];case 1:d.sent(),d.label=2;case 2:return[3,4];case 3:return d.sent(),[2,!1];case 4:return[2]}})})}),t.afterEach(function(i){return h(e,void 0,void 0,function(){var r;return m(this,function(o){switch(o.label){case 0:return r=n(i),r?[4,r.initialize()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})})}function O(t){var e=null,n=!1;function i(){return h(this,void 0,void 0,function(){return m(this,function(r){switch(r.label){case 0:if(!_.router)throw v.ModalRouterIntegrationNotInitialized();return n=!1,e=null,[4,x(t,l.computed(function(){var o;return(o=_.router)===null||o===void 0?void 0:o.currentRoute.value.params}),{isRoute:!0})];case 1:return e=r.sent(),e.onclose=function(){var o;n||(o=_.router)===null||o===void 0||o.back()},[2]}})})}return{getModalObject:function(){return e},_isModal:!0,close:function(r){return r===void 0&&(r=!1),h(this,void 0,void 0,function(){return m(this,function(o){switch(o.label){case 0:return n=r,e?[4,e.close()]:[3,2];case 1:return[2,o.sent()];case 2:return[2]}})})},initialize:i,setup:function(){return function(){return null}}}}O.init=q;exports.Modal=k;exports.closeById=w;exports.closeModal=P;exports.config=T;exports.container=W;exports.getComponentFromStore=S;exports.getCurrentModal=C;exports.modalQueue=c;exports.onBeforeModalClose=F;exports.openModal=x;exports.popModal=z;exports.promptModal=U;exports.pushModal=I;exports.useModalRouter=O;
//# sourceMappingURL=jenesius-vue-modal.cjs.js.map
